# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения

Приложение построено по принципам:

- Изолированности — каждый класс решает одну задачу и может использоваться независимо.
- Единственной ответственности.
- Масштабируемости — легко добавить новые экраны, типы карточек, модальные окна.

Основные части системы:

- Данные — `IProduct`, `IOrder`, API.
- Модели — `Api`, `BasketModal` — управляют данными.
- Отображения — `CardCatalog`, `CardPreview`, `Modal` — отвечают за рендер.
- Контроллеры — логика в index.ts, обработчики событий.

## Базовые классы и их назначение

`Api`

- Назначение: Взаимодействие с сервером.\
  Это модель данных, которая отвечает за обмен данными с API.
  Она не знает, как отображаются товары — она только загружает и отправляет данные.

- Функции:

  - `get(path)` - получает данные с сервера (например, список товаров).
  - `post(path, data)` — отправляет данные (например, заказ).
  - `handleResponse()` — проверяет, успешен ли ответ, и обрабатывает ошибки.

- Используется в:
  - index.ts - чтобы загрузить товары при старте.
  - `OrderForm` - чтобы отправить заказ.
    Это единственная точка доступа к серверу — принцип единственной ответственности.

`Modal`

- Назначение: Управление модальными окнами.\
  Это универсальный компонент для модальных окон — он не знает, что внутри: детали товара, корзина или форма заказа.
  Он просто открывает, закрывает и вставляет контент.

- Функции:

  - `open()`, `close()` — показ/скрытие модального окна.
  - `render(content)` — вставляет любой HTML (например, card-preview или basket).
  - `getContent()` — возвращает контейнер, куда можно вставлять элементы.

- Используется в:
  - `CardPreview` - чтобы показать детали товара.
  - `BasketModal` - чтобы открыть корзину.
  - `OrderForm` - чтобы показать форму заказа.
    Это компонент отображения, который можно повторно использовать — принцип изолированности.

`CardCatalog`

- Назначение: Рендер карточек товаров в галерее.\
  Отвечает за отображение списка товаров на главной странице.

- Функции:

  - `render(product)` — заполняет шаблон #card-catalog данными товара (название, цена, изображение).

- Используется в:
  - index.ts - при загрузке товаров.
    Он не знает, что будет при клике — это решает index.ts.
    Он просто превращает данные в визуальный элемент.

`CardPreview`

- Назначение: Показ детальной информации о товаре.\
  Используется в модальном окне при клике на карточку.

- Функции:

  - `render(product)` — заполняет шаблон #card-preview (с описанием, категорией, кнопкой).

- Используется в:
  - index.ts - при клике на товар.
    Он не знает логики, только заполняет шаблон.

`BasketModal`

- Назначение: Управление корзиной.\
  Это модель и отображение:

- Хранит список товаров `(items)`.
- Считает сумму `(getTotal())`.
- Показывает интерфейс корзины.

- Функции:

  - `add(item)` - добавляет товар, если его ещё нет.
  - `remove(id)` — удаляет товар по ID.
  - `render()` — обновляет список и счётчик.
  - `hasItem(id)` — проверяет, есть ли товар в корзине.
  - `getTotal()` — подсчёт суммы.
  - `clear()` - очищает корзину.

- Используется в: index.ts, `OrderForm`.

`OrderForm`

- Назначение: Оформление заказа (2 шага).

- Функции:

  - `renderDeliveryAndPayment()` — выбор способа оплаты и адреса.
  - `renderContactInfo()` — ввод email и телефона.
  - Валидация форм.

- Используется в: index.ts.

## Типы данных

- Основной товар
  `export type IProduct = {\
	id: string;\
	title: string;\
	category: string;\
	image: string;\
	price: number | null;\
	description: string;\
};`

- Товар в корзине
  `export interface IProductInBasket {\
	id: string;\
	title: string;\
	price: number;\
}`

- Данные формы
  `export interface IFormValues {\
	email: string;\
	phone: string;\
	address: string;\
	payment: string;\
}`

- Основной заказ
  `export interface IOrder {\
	payment: string;\
	address: string;\
	email: string;\
	phone: string;\
	total: number;\
	items: string[];\
}`

## Процессы и приложения

- События реализованы через колбэки и прямые вызовы.
- Трансформация данных:
  - `IProduct` → `IProductInBasket` (при добавлении в корзину),
  - `IFormValues` + `BasketModal.getTotal()` → `IOrder` (при оформлении).
- Валидация — на каждом шаге формы.

Архитектура соответствует MVP, легко масштабируется и готова к дальнейшему развитию.
